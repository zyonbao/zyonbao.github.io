---
layout: post
title: '函数指针-指针函数-指针数组-数组指针'
subtitle: '一直搞不懂的函数指针指针函数指针数组数组指针到底什么鬼，写个demo玩玩好了，顺便记录下到底发生了什么'
date: 2017-09-14
cover: '/uploads/cover-2017-09-14.png'
categories: C语言学习
tags: C语言 指针
---

# 函数指针
`void (*func1)(void);`//函数指针只是声明了一个函数指针,并不能在声明的同时定义其内容

```c
void func2 (void) {
  printf("func1 executed!\n");
}
```

另外,对 `func2` `&func2` 以及 `*func2` 所代表的内容均为该函数在内存中的地址
因此, 无论对 `func1 = func2` `func1 = &func2` 还是 `func1 = *func2` 甚至  `func1 = *******func2` 都可以使用 `func1()` 成功调用 `func2()` 函数的内容, 因为对 `函数名` 进行的 `*` `&` 操作的结果都是不变的;
那么, 为什么还需要使用如: `void (*func1)(void)` 来声明函数指针呢? 因为函数名本身是不可赋值与不可变的, 使用函数指针来引用函数, 可以将函数实现当做形参来传递, 让程序编写更加灵活.

对于 指针函数, 没有太多需要说的, 诸如 `void* func2 (void)` 仅仅是一个返回 `void*` 类型的函数而已.

# 数组指针
形如 `char (*ptr)[4]` 就是一个数组指针了, 与函数指针一样, `char (*ptr)[4]` 表明声明了一个*指针变量* `ptr` 指向一个 `char(*)[4]` 类型的*数组变量*, *而不是*声明了一个数组, 同样需要赋值才可以使用, 而且赋值的内容必须为目标类型.
因此, 正确的使用方式为:

`````c
char arr[4] = {1, 2, 3, 4}
`````

声明的同时赋值:

 ```c
char (*ptr)[4] = &arr
 ```

没错, *ptr = arr, 因此 上面那句也可以换成下面这两句:

 ```c
char (*ptr)[4];
ptr = &arr;
 ```

本质上, ptr 仍然是一个指针, 只是声明的方式与传统声明的方式相比, 更难阅读.

以下为代码:

```c
char a = '2', b='3', c = '4', d = '5';
char *arr1[4] = {&a, &b, &c, &d};
char arr2[4] = {a, b, c, d};
char (*ptr1)[4] = &arr1;
char (*ptr2)[4] = &arr2;
```